\documentclass[a4paper,10pt]{article}

\usepackage{graphicx}
\usepackage[ansinew]{inputenc}
\usepackage[spanish]{babel}
\usepackage{listings}
\usepackage{url}
\usepackage{color}
\usepackage{framed}
\usepackage{graphicx}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{epstopdf}
\usepackage[T1]{fontenc}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{ %
  language=C,                       % the language of the code
  basicstyle=\footnotesize,         % the size of the fonts that are used for the code
  numbers=left,                     % where to put the line-numbers
  numberstyle=\tiny\color{gray},    % the style that is used for the line-numbers
  stepnumber=1,                     % the step between two line-numbers. If it's 1, each line 
                                    % will be numbered
  numbersep=5pt,                    % how far the line-numbers are from the code
  backgroundcolor=\color{white},    % choose the background color. You must add \usepackage{color}
  showspaces=false,                 % show spaces adding particular underscores
  showstringspaces=false,           % underline spaces within strings
  showtabs=false,                   % show tabs within strings adding particular underscores
  frame=single,                     % adds a frame around the code
  rulecolor=\color{black},          % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
  tabsize=2,                        % sets default tabsize to 2 spaces
  captionpos=b,                     % sets the caption-position to bottom
  breaklines=true,                  % sets automatic line breaking
  breakatwhitespace=false,          % sets if automatic breaks should only happen at whitespace
  title=\lstname,                   % show the filename of files included with \lstinputlisting;
                                    % also try caption instead of title
  keywordstyle=\color{blue},        % keyword style
  commentstyle=\color{dkgreen},     % comment style
  stringstyle=\color{mauve},        % string literal style
  escapeinside={\%*}{*)},           % if you want to add LaTeX within your code
  morekeywords={*,...},             % if you want to add more keywords to the set
  rulesepcolor=\color{blue}
}

\title{     \textbf{Trabajo Práctico 0: \\ Infraestructura básica}}

\author{
            Duhalde, Agustín, \textit{Padrón Nro. 97.063}                            \\
            \texttt{ rbnm.jimenez@gmail.com }                                   \\[2.5ex]
            Barrabasqui, Horacio, \textit{Padrón Nro. 78.407}                             \\
            \texttt{ felixcarp@gmail.com }                                    \\[2.5ex]
            Suárez, Emiliano, \textit{Padrón Nro. 78.372}                             \\
            \texttt{ emilianosuarez@gmail.com }                                    \\[2.5ex]
    Fecha Entrega: \textit{05/04/2016}                                            \\[1.5ex]
            \normalsize{1er. Cuatrimestre de 2016}                                  \\
            \normalsize{66.20 Organización de Computadoras  $-$ Práctica Martes}    \\
            \normalsize{Facultad de Ingeniería, Universidad de Buenos Aires}        \\
       }
\date{}

\begin{document}

\maketitle
\thispagestyle{empty}   % quita el número en la primer página

\newpage
\begin{abstract}
Se implementó  un programa en lenguaje \textbf{C}, que multiplica matrices cuadradas de números reales, representados en punto flotante de doble precisión.
\end{abstract}

\section{Introducción}

En este Trabajo Práctico se pretende familiarizarse con las herramientas de software que usaremos en los siguientes trabajos.

Además, se utilizará \textsl{GXemul} para simular una máquina \textsl{MIPS} corriendo una versión reciente del sistema operativo \textsl{NetBSD}.

El programa implementado, muestra por \textsl{stdout} u \textsl{output file}, el resultado de multiplicar dos matrices cuadras (puede ser mas de una operación), previamente leídas por \textsl{stdin} o \textsl{input file}.

\section{Diseño e Implementación}

Se debió respetar la interfaz mostrada en el enunciado, tanto para la estructura de las matrices, como para la implementación de ciertos métodos.

El comando acepta 2 parámetros para mostrar la Ayuda y la Versión del programa:
\begin{verbatim}
$ ./tp0 -h
$ ./tp0 --help
\end{verbatim}
Para desplegar la ayuda del comando.
Y los siguientes comandos para mostrar la versión:
\begin{verbatim}
$ ./tp0 -V
$ ./tp0 --version
\end{verbatim}

Inicialmente el programa revisa la cadena de parametros ingresada y determina que tipo operación debe realizar.

En caso de no recibir los parámetros antes mencionados, se lee desde los argumentos, para saber cuales son los archivos de entrada (opcional) y el de salida.

Las matrices a multiplicar, como así también la resultado del producto, se representan en el formato row major order (para más información, puede consultarse la bibliografía mencionada al final del informe).

\section{Comando para compilar el programa}

Para compilar el programa se debe abrir una terminal en la carpeta donde están alojados los archivos fuentes (\textsl{src/}) y se ejecuta el siguiente comando:
\begin{verbatim}
../src$ make
\end{verbatim}
Para generar el ejecutable \textsl{tp0}.\\
\\
\textbf{make}: se encargara de compilar los archivos generando el ejecutable.

Se creó un archivo \textsl{Makefile} que permite compilar tanto la versión en \textsl{MIPS}, como en la versión implementada completamente en \textsl{C}.

El \textsl{Makefile} puede observarse a continuación:\\
\lstinputlisting{../src/Makefile}

\section{Casos de Prueba}
Algunos de los casos de pruebas realizados, pueden observarse a continuación:
\textbf{Importante}: Los resultados fueron modificados a 2 decimales por prolijidad del informe. En la corrida real, los mismos se verán con 6 decimales.

\begin{verbatim}
root@:~/2016/tp0# cat varias.txt 
3 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18
3 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6
2 1 2 3 4 5 6 7 8
root@:~/2016/tp0# cat output.txt 
root@:~/2016/tp0# ./tp0 varias.txt output.txt 
root@:~/2016/tp0# cat output.txt 
3 84.00 90.00 96.00 201.00 216.00 231.00 318.00 342.00 366.00 
3 15.00 15.00 15.00 30.00 30.00 30.00 45.00 45.00 45.00 
2 19.00 22.00 43.00 50.00 
\end{verbatim}

\begin{verbatim}
root@:~/2016/tp0# cat example.txt 
2 1 2 3 4 1 2 3 4
3 1 2 3 4 5 6.1 3 2 1 1 0 0 0 1 0 0 0 1
root@:~/2016/tp0# cat example.txt | ./tp0
2 7.00 10.00 15.00 22.00 
3 1.00 2.00 3.00 4.00 5.00 6.100 3.00 2.00 1.00
\end{verbatim}

\begin{verbatim}
root@:~/2016/tp0# ./tp0 
2 1 2 3 4 1 2 3 4
2 7.00 10.00 15.00 22.00 
3 1 2 3 4 5 6.1 3 2 1 1 0 0 0 1 0 0 0 1
3 1.00 2.00 3.00 4.00 5.00 6.10000 3.00 2.00 1.00
\end{verbatim}

\begin{verbatim}
root@:~/2016/tp0# cat output.txt 
root@:~/2016/tp0# cat example.txt 
2 1 2 3 4 1 2 3 4
3 1 2 3 4 5 6.1 3 2 1 1 0 0 0 1 0 0 0 1
root@:~/2016/tp0# cat example.txt | ./tp0 output.txt 
root@:~/2016/tp0# cat output.txt 
2 7.00 10.00 15.00 22.00
3 1.00 2.00 3.00 4.00 5.00 6.100 3.00 2.00 1.00
\end{verbatim}

\section{Conclusiones}

El presente trabajo permitió la familiarización con las herramientas de compilación de código C y código assembly en un entorno que emula la arquitectura MIPS 32, asegurando la portabilidad del programa. Es decir, el programa pudo se ejecutado tanto en un entorno UNIX, como en el NetBSD con los mismos resultados.

\newpage
\section{Apéndice}

\subsection{Código Fuente: main.c}
\lstinputlisting{../src/main.c}

\newpage
\subsection{main.s}
\lstinputlisting{../src/mips/main.s}

\subsection{Bibliografía}

\begin{thebibliography}{99}
\bibitem{GXEMUL} \emph{GXemul}\\
\url{http://gavare.se/gxemul/}

\bibitem{NETBSD} \emph{The NetBSD project}\\
\url{http://www.netbsd.org/}

\bibitem{ROWMAJORORDER} \emph{Row-major order (Wikipedia)}\\
\url{https://en.wikipedia.org/wiki/Row-major_order}
\end{thebibliography}

\end{document}
